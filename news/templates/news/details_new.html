{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}{{ news.name }}{% endblock %}

{% block content %}
<div class="container mt-5 bg-gray-100 p-6 rounded-lg shadow-md">
    {% if messages %}
    <div class="alert alert-danger text-center" role="alert">
        {% for message in messages %}
        {{ message }}
        {% endfor %}
    </div>
    {% endif %}

    <div class="md:flex">
        {% for news in newses %}

        <div class="md:w-1/2 md:ml-4">
            <h1 class="text-4xl font-bold mb-4">{{ news.title }}</h1>
            <p class="text-gray-800">{{ news.description }}</p>

            <h3>Average Rating: {{ average_rating|default:"No ratings yet" }}</h3>

            <div class="flex ">
                <form method="post" action="{% url 'details_new' new_id=article.id %}">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit">Submit Rating</button>
                </form>
    
                <h4 class="text-bold text-blue-800">User Ratings:</h4>
                <ul>
                    {% for rating in ratings %}
                    <h2>{{ rating.user.username }} - {{ rating.rating }}</h2>
                    {% endfor %}
                </ul>
            </div>
          
        </div>
        <div class="md:w-1/2 flex items-center justify-center mb-4">
            {% if news.image %}
            <img src="{{ news.image.url }}" alt="{{ news.name }} Image"
                class="w-full md:w-2/3 h-auto rounded-lg shadow-md">
            {% else %}
            <p>No image available.</p>
            {% endif %}
        </div>

        {% endfor %}
    </div>

</div>
{% endblock %}